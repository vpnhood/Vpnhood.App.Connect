# 🚀 Publishing the app on Google Play with Fastlane

This document outlines the steps required to set up your environment, manage dependencies, and deploy the application (AAB) to the Google Play Store using **Fastlane**.

---

## 1. Prerequisites and Environment Setup

1. 🌐 Download and install Ruby from [RubyInstaller for Windows](https://rubyinstaller.org/)
2. Add the following lines to your shell profile file (You can find your shell profile at ~/.bashrc, ~/.bash_profile, ~/.profile or ~/.zshrc depending on your system.) to ensure proper character encoding, which is essential for many Ruby gems like Fastlane:
```bash
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
``` 
> [!NOTE]
> After adding these lines, restart your shell to apply the changes.

3. Install Bundler by running:
```bash
gem install bundler
```
4. Install Project Dependencies by running:
```bash
bundle install
```


## 2. Deployment to Google Play

> [!IMPORTANT]
> Before continuing with the following steps, you need to create a **Google Play Developer API** for your project and place it in the path ```../.user/VpnHoodConnect/googleplay-fastlane-api-key.json```


The following command executes the `playstore` lane defined in the project's Fastfile, which handles the complete deployment process.
```bash
bundle exec fastlane playstore version_name:"YOUR_VERSION_NAME" version_code:"YOUR_VERSION_CODE" aab:"PATH_TO_YOUR_AAB_FILE"   
```

### Command Actions:
This single command performs the following critical tasks:

1. Upload AAB: Uploads the generated Android App Bundle (.aab file) to the production track on Google Play with 20% rollout.

2. Sync Metadata: Synchronizes all localized metadata (e.g., images, descriptions, release notes, screenshots) from your local project files to the Google Play Console.

3. Download Universal APK: After a successful upload, the universal APK generated by Google Play for the uploaded .aab is downloaded and saved to the following path:
> ./Pub/Android.GooglePlay/apk/VpnHoodConnect-android.apk

---
## Further Information
For a comprehensive understanding of the Fastlane toolchain, its configuration, and how lanes are defined, please refer to the official documentation [Fastlane Android Setup Guide](https://docs.fastlane.tools/getting-started/android/setup/) website.